<!-- templates/fragments/kbase.html -->
<section class="knowledge-bites" aria-labelledby="kb-title" th:fragment="kbase">
  <h2 id="kb-title" data-i18n="kb.title">Kurz erklärt</h2>

  <details class="kb" data-scope="kb.what">
    <summary>
      <span class="kb-title"   data-i18n="kb.what.title">Was ist Estimation Poker?</span>
      <span class="kb-preview" data-i18n="kb.what.preview">Kartenbasiertes Team-Estimationsritual…</span>
    </summary>
    <div class="kb-body">
      <p data-i18n="kb.what.body">
        Estimation Poker ist ein kollaboratives Verfahren, bei dem Teammitglieder gleichzeitig
        verdeckt schätzen und danach diskutieren. Das vermeidet Anker-Effekte und fördert gemeinsames Verständnis.
      </p>
    </div>
  </details>

  <details class="kb" data-scope="kb.when">
    <summary>
      <span class="kb-title"   data-i18n="kb.when.title">Wann wird es verwendet?</span>
      <span class="kb-preview" data-i18n="kb.when.preview">Vor oder während der Sprint-Planung…</span>
    </summary>
    <div class="kb-body">
      <ul>
        <li data-i18n="kb.when.li1">Backlog-Refinement &amp; Sprint-Planung</li>
        <li data-i18n="kb.when.li2">Neue/unklare Anforderungen</li>
        <li data-i18n="kb.when.li3">Grobschätzung in frühen Projektphasen</li>
      </ul>
    </div>
  </details>

  <details class="kb" data-scope="kb.benefits">
    <summary>
      <span class="kb-title"   data-i18n="kb.benefits.title">Vorteile</span>
      <span class="kb-preview" data-i18n="kb.benefits.preview">Gleichzeitiges Voten, bessere Diskussion…</span>
    </summary>
    <div class="kb-body">
      <ul>
        <li data-i18n="kb.benefits.li1">Vermeidet Voreingenommenheit (gleichzeitiges Aufdecken)</li>
        <li data-i18n="kb.benefits.li2">Deckt Wissenslücken &amp; Risiken durch Abweichungen auf</li>
        <li data-i18n="kb.benefits.li3">Stärkt gemeinsames Verständnis im Team</li>
      </ul>
    </div>
  </details>

  <details class="kb" data-scope="kb.storypoints">
    <summary>
      <span class="kb-title"   data-i18n="kb.storypoints.title">Was sind Story Points?</span>
      <span class="kb-preview" data-i18n="kb.storypoints.preview">Relatives Maß für Aufwand/Komplexität…</span>
    </summary>
    <div class="kb-body">
      <p data-i18n="kb.storypoints.body">
        Story Points messen relativ (nicht in Stunden) die Größe einer Aufgabe: Kombination aus
        Umfang, Komplexität, Unsicherheit und Risiken. Vergleichbarkeit entsteht erst im Team über Zeit.
      </p>
    </div>
  </details>
</section>

<!-- JS: nur ein Panel gleichzeitig offen -->
<script th:fragment="kbase-js">
  (function(){
    if (window.__kbBound) return; window.__kbBound = true;
    document.addEventListener('toggle', function(e){
      if (!e.target.classList || !e.target.classList.contains('kb') || !e.target.open) return;
      document.querySelectorAll('.kb[open]').forEach(d => { if (d !== e.target) d.open = false; });
    });
  })();
</script>
