# --- Core ---
spring.application.name=estpoker
spring.messages.basename=messages

# Feature flags (defaults)
features.persistentRooms.enabled=false

# Behind proxy/CDN (Cloudflare/Koyeb)
server.forward-headers-strategy=framework

# WebSocket: exact origins
app.websocket.allowed-origins=http://localhost:*,http://127.0.0.1:*,https://*.trycloudflare.com,https://ep.noxvobiscum.at

# --- File storage (FTPS to DomainFactory) ---
app.storage.mode=ftps

app.storage.ftps.host=${DF_FTP_HOST:ftp.noxvobiscum.at}
app.storage.ftps.port=${DF_FTP_PORT:21}
app.storage.ftps.user=${DF_FTP_USER:}
app.storage.ftps.pass=${DF_FTP_PASS:}
app.storage.ftps.base-dir=${DF_FTP_BASE:rooms}

app.storage.ftps.passive=true
app.storage.ftps.implicit-mode=false
app.storage.ftps.so-timeout-ms=15000
app.storage.ftps.data-timeout-ms=20000
app.storage.ftps.use-utf8=true
app.storage.ftps.debug=true
app.storage.ftps.prefer-ipv4=true

# --- Password hashing (BCrypt + optional pepper) ---
app.security.password.bcrypt-cost=${ROOM_BCRYPT_COST:10}
app.security.password.pepper=${ROOM_PW_PEPPER:}

# Optional diagnostic endpoints for hashing (disabled by default)
features.securityProbe.enabled=false

# --- Snapshotter for live -> stored sync ---
features.persistentRooms.snapshot.enabled=true
features.persistentRooms.snapshot.debounceMs=1500

# Optional: turn on debug logs for snapshot/persistence to verify calls
logging.level.com.example.estpoker.rooms.service=DEBUG
