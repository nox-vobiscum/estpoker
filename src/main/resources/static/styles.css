/* ==========================================================================
   Estimation Poker – styles.css
   Notes:
   - Dark & Light via [data-theme] (system default is dark).
   - Inputs in dark theme intentionally lighter for contrast.
   - Menu is compact (smaller font + tighter paddings).
   - Native tooltips only (no custom tooltip CSS).
   ========================================================================== */

/* ---------- Color tokens ------------------------------------------------- */
:root{
  /* Base palette (dark default) */
  --bg: #111827;                 /* near-black */
  --surface: #1f2937;            /* slate-800 */
  --surface-2: #111827;          /* backdrop blend */
  --text: #e5e7eb;               /* slate-200 */
  --text-weak: #9ca3af;          /* slate-400 */
  --text-strong: #ffffff;

  --muted: #8b5cf6;              /* violet-500 (icons/labels) */
  --info: #60a5fa;               /* blue-400 */
  --danger: #ef4444;             /* red-500 */
  --danger-weak: #fecaca;        /* red-200 */
  --ok: #10b981;                 /* emerald-500 */
  --ok-border: #34d399;          /* emerald-400 */

  --chip-special-bg: #334155;    /* slate-700 */
  --chip-special-border: #475569; /* slate-600 */
  --chip-special-text: #e5e7eb;

  --border: #374151;             /* slate-700 */

  --accent: #1d4ed8;             /* blue-700 */
  --accent-weak: #2563eb;        /* blue-600 */

  /* Inputs (dark) */
  --input-bg: #0f172a;           /* slate-900 a bit bluish */
  --input-border: #334155;       /* slate-600 */
  --input-text: #f3f4f6;         /* near-white */
  --input-placeholder: #94a3b8;  /* slate-400 */

  /* Menu sizing (compact) */
  --menu-font: 0.9rem;           /* ~10% smaller */
  --menu-title: 0.86rem;
  --menu-item-h: 40px;           /* row height */
  --menu-gap: .5rem;
  --radius: 12px;
}

/* Light theme overrides */
:root[data-theme="light"]{
  --bg:#f3f4f6;                  /* slate-100 */
  --surface:#ffffff;
  --surface-2:#f3f4f6;
  --text:#111827;
  --text-weak:#6b7280;
  --text-strong:#0f172a;

  --border:#e5e7eb;

  --accent:#1d4ed8;
  --accent-weak:#2563eb;

  /* Inputs (light) unchanged */
  --input-bg:#ffffff;
  --input-border:#d1d5db;
  --input-text:#111827;
  --input-placeholder:#9ca3af;

  --chip-special-bg:#e5e7eb;
  --chip-special-border:#d1d5db;
  --chip-special-text:#111827;
}

/* ---------- Reset / base ------------------------------------------------- */
*{box-sizing:border-box}
html,body{height:100%}
html{color-scheme:dark light}
body{
  margin:0; background:var(--bg); color:var(--text);
  font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
}

/* Links & small utilities */
a{color:var(--info);text-decoration:none}
a:hover{text-decoration:underline}
small, .hint{opacity:.8}

/* ---------- App header/title -------------------------------------------- */
.app-title{display:flex;align-items:center;gap:.5rem;margin:12px 16px}
.app-title .logo{border-radius:6px;vertical-align:middle}

/* ---------- Buttons ------------------------------------------------------ */
.button{
  display:inline-block; border:none; border-radius:10px; padding:.7rem 1.1rem;
  background:var(--accent); color:#fff; font-weight:600; cursor:pointer;
  box-shadow:0 2px 0 rgba(0,0,0,.15), inset 0 -2px 0 rgba(255,255,255,.08);
}
.button:hover{background:var(--accent-weak)}
.button:disabled{opacity:.55; cursor:not-allowed}

/* Icon-sized button (copy link) */
.icon-button{
  display:inline-grid; place-items:center;
  width:28px;height:28px;border-radius:8px;border:1px solid var(--border);
  background:var(--surface); color:var(--text); cursor:pointer;
}
.icon-button:hover{border-color:#64748b}

/* ---------- Forms (index/invite) ---------------------------------------- */
.container{max-width:760px;margin:24px auto;padding:0 16px}
.join-form{max-width:520px;margin:32px 0}
.join-form .form-row{margin:12px 0}
.join-form label{display:block;margin:0 0 6px 2px;color:var(--muted);font-weight:600}

input,select,textarea{
  width:100%; border-radius:10px; border:1px solid var(--input-border);
  background:var(--input-bg); color:var(--input-text);
  padding:.7rem .9rem; outline:none;
  -webkit-appearance:none; -moz-appearance:none; appearance:none; /* lint */
}
input::placeholder,textarea::placeholder{color:var(--input-placeholder)}
input:focus,select:focus,textarea:focus{
  border-color:var(--accent-weak);
  box-shadow:0 0 0 3px var(--accent-weak);
}
input[disabled],select[disabled],textarea[disabled]{opacity:.7}

/* ---------- Participant list -------------------------------------------- */
.main-info{margin:10px 16px}
.room-with-actions{display:flex;align-items:center;gap:.5rem}
#liveParticipantList{list-style:none;margin:0 16px 18px;padding:0}
.participant-row{
  display:grid; grid-template-columns:28px 1fr max-content;
  align-items:center; gap:.75rem;
  background:var(--surface); border:1px solid var(--border);
  border-radius:10px; padding:.45rem .6rem; margin:.35rem 0;
}
.participant-row.disconnected{opacity:.55}
.participant-row .participant-icon{width:22px;text-align:center}
.participant-row .name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.participant-row .row-right{display:flex;align-items:center;gap:.45rem}
.status-icon{display:inline-grid;place-items:center;width:22px;height:22px;border-radius:6px;border:1px solid var(--border);background:var(--surface)}
.status-icon.done{color:#22c55e;border-color:#22c55e}
.status-icon.pending{color:#f59e0b;border-color:#f59e0b}
.status-icon.observer{color:#60a5fa;border-color:#60a5fa}

/* row action buttons (Make host / Kick) */
.row-action{
  display:inline-grid; grid-auto-flow:column; align-items:center; gap:.35rem;
  height:26px; padding:0 .5rem; border-radius:8px; border:1px solid var(--border);
  background:var(--surface); color:var(--text); cursor:pointer; font-weight:600;
}
.row-action .ra-icon{display:inline-block}
.row-action.host{border-color:#64748b}
.row-action.kick{border-color:#b91c1c;color:#fecaca;background:rgba(239,68,68,.08)}
.row-action:hover{filter:brightness(1.06)}

/* ---------- Cards grid --------------------------------------------------- */
.card-grid{
  display:grid; grid-template-columns:repeat(auto-fit,minmax(66px,1fr));
  gap:12px; margin:16px;
}
.card-grid .grid-break{grid-column:1/-1;height:4px}
.card-grid button{
  height:48px;border-radius:12px;border:1px solid var(--border);
  background:var(--surface);color:var(--text);font-weight:700;cursor:pointer;
}
.card-grid button.selected{outline:3px solid var(--accent-weak)}
.card-grid button:disabled{opacity:.5;cursor:not-allowed}

/* ---------- Reveal/Reset panel ------------------------------------------ */
.pre-vote, .post-vote{margin:16px}
.average-label{display:flex;align-items:center;gap:.35rem}
.average-label .label{opacity:.9}
.average-label.consensus{color:#22c55e}
#resultLabel .label-average .label-long{display:inline}
#resultLabel .label-average .label-short{display:none}

/* ---------- Vote chips --------------------------------------------------- */
.vote-chip{
  display:inline-flex; align-items:center; justify-content:center;
  padding:.15rem .5rem; border-radius:8px; background:var(--ok); color:#fff;
  font-weight:700; border:2px solid var(--ok-border); box-shadow:0 0 6px var(--ok);
  font-size:.95rem; line-height:1.2; min-width:2.4rem; text-align:center;
  opacity:0; transform:translateY(6px); animation:chipIn 220ms ease forwards;
}
.vote-chip.special{background:var(--chip-special-bg);border-color:var(--chip-special-border);box-shadow:none;color:var(--chip-special-text)}
:root[data-theme="light"] .vote-chip.special{background:var(--chip-special-bg);border-color:var(--chip-special-border);color:var(--chip-special-text)}
.vote-chip[data-val="☕"]{font-size:1.25rem;padding:.1rem .55rem}
.vote-chip.outlier{box-shadow:0 0 0 3px rgba(255,213,79,.22), inset 0 0 0 1px rgba(255,213,79,.55)}
:root[data-theme="light"] .vote-chip.outlier{box-shadow:0 0 0 3px rgba(255,213,79,.28), inset 0 0 0 1px rgba(234,179,8,.55)}
@keyframes chipIn{to{opacity:1;transform:translateY(0)}}

/* ---------- App menu (compact) ------------------------------------------ */
.menu-button{
  position:fixed;right:16px;bottom:16px;z-index:50;
  width:44px;height:44px;border-radius:12px;border:1px solid var(--border);
  background:var(--surface);color:var(--text);cursor:pointer;font-size:22px;
}
.menu-overlay.hidden{display:none}
.menu-overlay{position:fixed;inset:0;z-index:40}
.menu-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45)}
.menu-panel{
  position:absolute;right:10px;top:10px;bottom:10px;width:min(380px,92vw);
  background:var(--surface);border:1px solid var(--border);border-radius:14px;
  padding:12px; overflow:auto; font-size:var(--menu-font);
  box-shadow:0 12px 40px rgba(0,0,0,.45);
}
.menu-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:.35rem}
.menu-header h3{margin:.2rem 0;font-size:1rem}

.menu-section{margin:.5rem 0}
.section-title{
  margin:.3rem 0 .35rem; font-weight:700; font-size:var(--menu-title);
  opacity:.9; color:var(--text-strong);
}

/* Language compact row */
#langRow.menu-item{
  display:grid; grid-template-columns:28px 1fr; align-items:center;
  gap:.6rem; height:var(--menu-item-h); padding:0 .6rem;
  background:var(--surface); border:1px solid var(--border); border-radius:10px;
  cursor:pointer;
}
.flag-split{display:inline-grid;grid-auto-flow:column;gap:2px;vertical-align:middle}
.flag{display:inline-block;border-radius:3px}

/* Theme buttons */
.menu-choice{display:flex;gap:.5rem;flex-wrap:wrap}
.menu-choice.vertical{flex-direction:column}
.choice-btn{
  display:inline-grid;grid-auto-flow:column;align-items:center;gap:.4rem;
  height:var(--menu-item-h); padding:0 .65rem; border-radius:10px;
  border:1px solid var(--border); background:var(--surface); color:var(--text); cursor:pointer;
}
.choice-btn[aria-pressed="true"], .choice-btn.active{
  outline:3px solid var(--accent-weak);
}

/* Radio list (card sequence) – keep native radios visible */
#menuSeqChoice{border:none;padding:0;margin:0}
label.radio-row{
  display:grid; grid-template-columns:20px 1fr; align-items:center;
  gap:.55rem; padding:.35rem .55rem; border-radius:10px;
  background:var(--surface); border:1px solid var(--border);
}
label.radio-row + label.radio-row{margin-top:.4rem}
label.radio-row.disabled{opacity:.6}
#menuSeqChoice input[type="radio"]{
  width:18px;height:18px; margin:0;
  accent-color: var(--accent-weak);
}

/* Switch rows (auto-reveal, topic, participation) */
.menu-item.switch{
  display:grid; grid-template-columns:28px 1fr max-content; align-items:center;
  gap:.6rem; height:var(--menu-item-h); padding:0 .6rem;
  background:var(--surface); border:1px solid var(--border); border-radius:10px;
}
.menu-item.switch + .menu-item.switch{margin-top:.45rem}
.menu-item.switch.disabled{opacity:.6}

.switch-text strong{font-weight:700}
.switch-control{
  width:44px;height:24px;border-radius:999px;border:1px solid var(--border);
  background:#0b1220; position:relative; cursor:pointer;
  -webkit-appearance:none; -moz-appearance:none; appearance:none;
}
:root[data-theme="light"] .switch-control{background:#f3f4f6}
.switch-control:after{
  content:""; position:absolute; inset:3px auto 3px 3px; width:18px; border-radius:999px;
  background:#fff; box-shadow:0 1px 0 rgba(0,0,0,.15);
  transition:transform .15s ease;
}
.switch-control[aria-checked="true"]:after{transform:translateX(20px)}
.switch-control[aria-checked="true"]{background:#065f46;border-color:#10b981}

/* Close-room CTA (kept emoji in markup) */
#closeRoomBtn.menu-item.danger{
  display:grid; grid-template-columns:28px 1fr; align-items:center; gap:.6rem;
  height:var(--menu-item-h); padding:0 .6rem; border-radius:10px;
  background:rgba(255,70,70,.10); border:1px solid rgba(255,70,70,.25); color:var(--danger-weak);
}
#closeRoomBtn.menu-item.danger:hover{
  border-color:rgba(255,70,70,.45); box-shadow:0 0 0 2px rgba(239,68,68,.18);
}
#closeRoomBtn .truncate-1{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* ---------- Footer -------------------------------------------------------- */
.app-footer{margin:30px 16px 24px;opacity:.8}

/* ---------- Toast --------------------------------------------------------- */
.toast{
  position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
  background:#111827;color:#e5e7eb;padding:.6rem .9rem;border-radius:10px;
  border:1px solid #374151;z-index:60;opacity:0;animation:toastIn .2s ease forwards
}
@keyframes toastIn{to{opacity:1; transform:translate(-50%,0)}}
