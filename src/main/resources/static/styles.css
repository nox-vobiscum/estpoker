/* src/main/resources/static/styles.css */
/* === Estimation Poker – full CSS === */

:root {
  /* === Theme variables (VS Code Dark inspired) === */
  --bg: #1e1e1e;
  --text: #d4d4d4;
  --text-strong: #ffffff;
  --text-dim: #bbbbbb;

  --panel: #2d2d30;
  --panel-2: #3c3c3c;
  --panel-2-hover: #47494d;  /* hover bg with good contrast */
  --panel-hover: #34363a;    /* hover bg for buttons/cards */
  --border: #3c3c3c;

  --accent: #007acc;
  --accent-strong: #005a9e;
  --ok: #4CAF50;
  --ok-border: #81C784;
  --warn: #FFD54F;
  --danger: #ef4444;

  --shadow: 0 6px 16px rgba(0,0,0,0.25);
  --radius: 12px;
  --radius-sm: 8px;

  --h-input: 44px;
  --h-button: 44px;

  --gap: 12px;
  --gap-sm: 8px;

  /* Cards sizing (desktop defaults) */
  --card-min-desktop: 46px;
  --card-max-desktop: 84px;
  --card-min-mobile: 40px;
  --card-max-mobile: 72px;

  /* Spacing */
  --pre-vote-margin-desktop: 2.2rem;
  --pre-vote-margin-mobile: 1.1rem;

  /* Participant list columns */
  --icon-col-width: 1.5rem;
  --name-text-col: 0px;
}

/* Light mode */
:root[data-theme="light"] {
  --bg: #f6f7f9;
  --text: #1f2937;
  --text-strong: #111827;
  --text-dim: #374151;

  --panel: #ffffff;
  --panel-2: #eef2f7;
  --panel-2-hover: #e7ebf2;
  --panel-hover: #f7f8fb;
  --border: #e5e7eb;

  --accent: #2563eb;
  --accent-strong: #1d4ed8;

  --shadow: 0 10px 24px rgba(0,0,0,0.08);
}

/* ===== Base layout ===== */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  background-color: var(--bg);
  color: var(--text);
  font-family: Consolas, monospace; /* einheitlich überall */
  padding: 2rem;
  margin: 0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
body.menu-open { overflow: hidden; }
:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.container { max-width: 800px; margin: 0 auto; padding: 1rem; }

/* Headings: H1 bleibt, H2 kleiner (auch für „Teilnehmende“/„Karte wählen“) */
h1 { color: var(--text-strong); margin-bottom: 2rem; font-size: 1.1rem; }
h2 { color: var(--text-strong); margin: 1.2rem 0 .8rem; font-size: .98rem; }

strong { color: var(--text-strong); }

/* Header & Title img */
.app-title { display:flex; align-items:center; gap:.5rem; }
.app-title .logo { border-radius:6px; vertical-align:middle; }

/* Header info block */
.main-info{
  display: grid;
  grid-template-columns: max-content 1fr;
  column-gap: 10px;
  row-gap: 6px;
  align-items: center;
  margin-bottom: 1.2rem;
}
.main-info dt{
  margin: 0;
  grid-column: 1;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
}
.main-info dd{
  margin: 0;
  grid-column: 2;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.main-info .mi-icon{ line-height: 1; }
.main-info .mi-label{ opacity: .95; }

/* ===== App menu (hamburger) ===== */
.menu-button {
  position: fixed;
  top: 12px;
  right: 12px;
  z-index: 1100;
  height: 40px;
  width: 40px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--panel);
  color: var(--text-strong);
  cursor: pointer;
  box-shadow: var(--shadow);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  transition: transform 120ms ease, background 180ms ease, border-color 180ms ease, box-shadow 180ms ease;
  -webkit-tap-highlight-color: transparent;
}
.menu-button:hover { background: var(--panel-hover); border-color: #4a4a4a; }
.menu-button:active { transform: translateY(1px) scale(0.98); }

/* ===== Menu overlay ===== */
.hidden { display: none !important; }

.menu-overlay { position: fixed; inset: 0; z-index: 1090; }
.menu-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.45); backdrop-filter: blur(1px); }
:root[data-theme="light"] .menu-backdrop { background: rgba(0,0,0,0.25); }

.menu-panel {
  position: absolute;
  top: 12px; right: 12px;
  width: min(96vw, 360px);
  max-width: calc(100vw - 24px);
  background: var(--panel);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: var(--shadow);
  padding: 10px;
  animation: slideIn 180ms ease both;

  /* nie abgeschnitten + kein horizontaler Overflow */
  max-height: calc(100vh - 24px);
  overflow: auto;
  overscroll-behavior: contain;

  /* Fonts überall konsistent */
  font-family: inherit;
}
@keyframes slideIn { from { opacity: 0; transform: translateY(-6px); } to { opacity: 1; transform: translateY(0); } }

.menu-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 6px 6px 8px 6px; border-bottom: 1px solid var(--border);
  position: sticky; top: 0; background: var(--panel); z-index: 1;
  font-family: inherit;
}
.menu-header h3 { margin: 0; font-size: 0.95rem; color: var(--text-strong); }

.menu-section { display: grid; gap: 10px; padding: 10px 4px 12px 4px; font-family: inherit; }

/* Language row item */
.menu-item {
  display: grid;
  grid-template-columns: 28px auto;
  align-items: center;
  gap: 10px;
  padding: 10px;
  border-radius: 10px;
  background: var(--panel-2);
  border: 1px solid var(--border);
  cursor: pointer;
  text-align: left;
  font-size: 0.95rem;
  color: var(--text);
  transition: background 180ms ease, border-color 180ms ease, box-shadow 180ms ease;
  font-family: inherit;        /* Schrift begradigt */
}
.menu-item:hover {
  background: var(--panel-2-hover);
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(0,122,204,0.12);
}
.menu-item .mi-icon { font-size: 18px; line-height: 1; }

/* Split-flag icon */
.flag-split {
  position: relative; display: inline-flex; width: 24px; height: 16px; overflow: hidden; border-radius: 3px; border: 1px solid var(--border);
}
.flag-split .flag { width: 24px; height: 16px; object-fit: cover; }
.flag-split .flag-b { position: absolute; right: 0; clip-path: polygon(50% 0, 100% 0, 100% 100%, 0 100%); }

/* Theme choice group */
.menu-group { display: grid; gap: 8px; font-family: inherit; }
.group-title { font-size: 0.9rem; color: var(--text); opacity: .92; padding: 0 2px; }

/* Theme buttons row */
.menu-choice {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  font-family: inherit;
}
.choice-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 8px;
  border-radius: 10px;
  background: var(--panel-2);
  border: 1px solid var(--border);
  cursor: pointer;
  font-size: 0.95rem;
  height: 38px;
  color: var(--text);
  transition: background 180ms ease, border-color 180ms ease, box-shadow 180ms ease;
  font-family: inherit;
}
.choice-btn .mi-icon { font-size: 18px; line-height: 1; }
.choice-btn:hover {
  background: var(--panel-2-hover);
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(0,122,204,0.12);
}
.choice-btn.active {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(0,122,204,0.20);
}

/* ===== Sequence radios (immer EINSPALTIG & kompakt) ===== */
.menu-choice.vertical {
  display: grid;
  grid-template-columns: 1fr !important; /* erzwingt 1 Spalte auf allen Breakpoints */
  gap: 8px;
  font-family: inherit;
}

.radio-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 10px;
  background: var(--panel-2);
  border: 1px solid var(--border);
  user-select: none;
  transition: background 180ms ease, border-color 180ms ease, box-shadow 180ms ease;
  font-size: .95rem;
  font-family: inherit;         /* keine abweichenden Fonts */
  min-height: 40px;
}
.radio-row:hover { background: var(--panel-2-hover); border-color: var(--accent); box-shadow: 0 0 0 2px rgba(0,122,204,0.12); }
.radio-row input[type="radio"] { width: 18px; height: 18px; accent-color: var(--accent); margin: 0; flex: 0 0 auto; }
.radio-row.disabled { opacity: .55; cursor: not-allowed; }
/* Text innerhalb der Radio-Row: einzeilig, aber ohne Overflow */
.radio-row > span {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  min-width: 0;                 /* für Flex shrink */
  flex: 1 1 auto;
}
/* checked state */
.radio-row:has(input[type="radio"]:checked) {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(0,122,204,0.20);
  background: color-mix(in srgb, var(--panel-2) 84%, var(--accent) 16%);
}

/* ===== Landing page / form layout ===== */
.landing-container {
  display: flex; flex-direction: column; align-items: center;
  min-height: 90vh; padding: 2rem; text-align: center; margin-top: 6vh;
}
.join-form { display: flex; flex-direction: column; align-items: center; gap: 1rem; width: 100%; }
.form-row { display: flex; flex-direction: column; gap: 1rem; width: 100%; max-width: 400px; }
.form-field { width: 100%; }

/* Text inputs */
.form-field input[type="text"] {
  height: var(--h-input);
  padding: 0 1rem;
  font-size: 1rem;
  border: 1px solid #555;
  border-radius: var(--radius-sm);
  background-color: var(--panel-2);
  color: var(--text);
  width: 100%;
  outline: none;
  transition: box-shadow 180ms ease, border-color 180ms ease, background 180ms ease;
  font-family: inherit;
}
.form-field input[type="text"]:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(0,122,204,0.25);
  background: #34373a;
}

/* Checkboxes, hints, actions */
.checkbox-row { display: flex; align-items: center; gap: 0.5rem; width: 100%; max-width: 400px; }
.hint { width: 100%; max-width: 400px; color: var(--text-dim); font-size: 0.9rem; margin: -4px 0 8px; }
.form-actions { width: 100%; max-width: 400px; }
.form-actions .button { width: 100%; }

/* Error box */
.error {
  background: #7f1d1d; border: 1px solid #b91c1c; color: #fee2e2;
  padding: 12px; border-radius: 10px; width: 100%; max-width: 400px; margin: 0 auto 1rem;
}

/* Buttons */
.button {
  margin-top: 1.2rem;
  height: var(--h-button);
  padding: 0 1.2rem;
  background: var(--accent);
  color: white;
  border: none;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 1rem;
  font-family: inherit;
  transition: transform 120ms ease, filter 180ms ease, box-shadow 180ms ease, background 180ms ease;
  box-shadow: var(--shadow);
}
.button:hover { background: var(--accent-strong); filter: brightness(1.04); }
.button:active { transform: translateY(1px) scale(0.985); }
.button:disabled { opacity: .6; cursor: not-allowed; }

/* Submit feedback */
@keyframes shake { 0%,100%{transform:translateX(0)} 20%,60%{transform:translateX(-6px)} 40%,80%{transform:translateX(6px)} }
button.shake { animation: shake .4s; }

/* ===== Card grid ===== */
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--card-min-desktop), var(--card-max-desktop)));
  gap: 8px;
  margin: 1rem 0;
}
.card-grid button {
  display: inline-block;
  padding: 0.55rem 0.6rem;
  margin: 0.35rem;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
  font-size: clamp(1.05rem, 2.2vw, 1.3rem);
  text-align: center;
  color: var(--text);
  position: relative;
  aspect-ratio: 5 / 3;
}
.card-grid button:hover {
  background: var(--panel-hover);
  transform: translateY(-1px);
  box-shadow: 0 0 10px rgba(0,122,204,0.35);
  border-color: #4a4a4a;
}

/* Selected state */
button.selected {
  background-color: #163a52 !important;
  color: #fff !important;
  font-weight: bold;
  border: 2px solid rgba(0,122,204,0.6);
  box-shadow: 0 0 0 4px rgba(0,122,204,0.22), 0 0 12px rgba(0,122,204,0.35);
  transform: scale(1.03);
}

/* Checkmark badge (immer gleich – grüner Haken im weißen Kreis) */
.card-grid .checkmark{
  position: absolute;
  top: 6px; right: 6px;
  width: 20px; height: 20px;
  border-radius: 999px;
  background: #fff;
  color: #16a34a;                 /* green-600 */
  border: 2px solid #16a34a;
  display: none;                  /* sichtbar nur bei .selected */
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 800;
  line-height: 14px;
  box-shadow: 0 1px 3px rgba(0,0,0,.35);
  z-index: 2;
}
button.selected .checkmark { display: flex; }

/* ===== Participant list ===== */
ul { list-style: none; padding: 0; margin: 0; }
li { margin-bottom: 0.4rem; line-height: 1.5; font-size: 1rem; }

#liveParticipantList .participant-row {
  display: grid;
  grid-template-columns: var(--icon-col-width) max(18ch, var(--name-text-col)) auto;
  align-items: center;
  column-gap: 0.4rem;
  margin-bottom: 0.4rem;
  padding: 6px 8px;
  border-bottom: 1px solid var(--border);
  border-radius: 6px;
}
#liveParticipantList .participant-row.is-host {
  background: rgba(0,122,204,0.08);
  outline: 1px solid rgba(0,122,204,0.22);
}
.participant-icon { width: var(--icon-col-width); display: inline-flex; justify-content: center; align-items: center; line-height: 1; }
.participant-icon.host { font-size: 1.1rem; }
.participant-icon.inactive { opacity: 0.75; }

.name { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; min-width: 0; color: var(--text); }

.row-right { display: inline-flex; align-items: center; justify-content: flex-start; gap: 6px; }

/* Disconnected */
#liveParticipantList li.disconnected { color: #888; font-style: italic; text-decoration: none; }

/* Status icons */
.status-icon { font-size: 1rem; line-height: 1; display: inline-flex; align-items: center; }
.status-icon.done { color: var(--ok); filter: drop-shadow(0 0 2px rgba(76,175,80,.6)); }
.status-icon.pending { color: var(--warn); opacity: .95; }

/* Vote chip */
.vote-chip {
  display: inline-block; padding: 0.15rem 0.5rem; border-radius: 8px;
  background-color: var(--ok); color: #fff; font-weight: bold;
  border: 2px solid var(--ok-border); box-shadow: 0 0 6px var(--ok);
  font-size: 0.95rem; line-height: 1.2; min-width: 2ch; text-align: center;
  opacity: 0; transform: translateY(6px); animation: chipIn 220ms ease forwards;
}
.vote-chip.special { background: #334155; border-color: #475569; box-shadow: none; color: var(--text-strong); }
/* ☕ besser erkennbar – per JS: voteChip.dataset.val = v */
.vote-chip[data-val="☕"] { font-size: 1.25rem; padding: 0.1rem 0.55rem; }
@keyframes chipIn { to { opacity: 1; transform: translateY(0); } }

/* Pre/Post vote blocks + Average */
.pre-vote { margin-top: var(--pre-vote-margin-desktop); }
.average-label { font-size: 0.85rem; margin-top: 1rem; }
.average-label #averageVote { font-size: 0.85rem; font-weight: 600; opacity: 0; animation: avgIn 240ms ease forwards; }
@keyframes avgIn { to { opacity: 1; } }

/* Toasts */
.toast {
  position: fixed; top: 20px; right: 20px; background-color: rgba(51,51,51,0.95); color: white;
  padding: 12px 20px; border-radius: 10px; z-index: 9999; font-size: 14px;
  box-shadow: var(--shadow); transform: translateY(-10px); opacity: 0;
  animation: fadein 220ms ease forwards, fadeout 400ms ease 2400ms forwards;
}
@keyframes fadein { to { opacity: .95; transform: translateY(0);} }
@keyframes fadeout { to { opacity: 0; } }

/* ===== QR Overlay ===== */
.qr-overlay { position: fixed; inset: 0; z-index: 1200; }
.qr-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.55); backdrop-filter: blur(2px); }
:root[data-theme="light"] .qr-backdrop { background: rgba(0,0,0,0.35); }

.qr-dialog {
  position: absolute; inset: 0; margin: auto;
  width: min(92vw, 420px);
  background: var(--panel);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: var(--shadow);
  padding: 12px;
  max-height: 92vh;
  display: grid;
  grid-template-rows: auto 1fr auto;
  animation: slideIn 180ms ease both;
}
.qr-header { display: flex; align-items: center; justify-content: space-between; padding: 4px 6px 8px 6px; border-bottom: 1px solid var(--border); }
.qr-header h3 { margin: 0; font-size: 1rem; color: var(--text-strong); }
.qr-close { border: 1px solid var(--border); background: var(--panel-2); border-radius: 8px; width: 34px; height: 34px; cursor: pointer; }
.qr-body { display: grid; place-items: center; padding: 16px; }
.qr-actions { display: flex; justify-content: flex-end; gap: 8px; padding: 8px; }

#qrCanvas { image-rendering: pixelated; width: 320px; height: 320px; border-radius: 10px; background: #fff; }

/* reduziert Bewegung */
@media (prefers-reduced-motion: reduce) {
  .menu-panel, .qr-dialog { animation: none; }
}

/* ===== Responsiveness / Mobile optimizations ===== */
@media (max-width: 600px) {
  body { padding: 1rem; }
  h2 { font-size: .92rem; margin: .9rem 0 .6rem; }

  /* Karten: exakt 4 pro Reihe auf Phones */
  .card-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); gap: 6px; }
  .card-grid button {
    padding: 0.5rem;
    font-size: clamp(1rem, 4.2vw, 1.25rem);
    margin: 0.2rem;
    aspect-ratio: 5 / 3;
  }

  /* bring actions näher/optional sticky */
  .pre-vote { margin-top: var(--pre-vote-margin-mobile); }
  #revealButton, #resetButton {
    position: sticky;
    bottom: 12px;
    box-shadow: 0 10px 24px rgba(0,0,0,.22);
    z-index: 5;
  }

  ul li { font-size: 1.05rem; line-height: 1.45; }
  .container h1:first-child { margin-top: 1.2rem; }
}

.brandmark {
  vertical-align: -3px;
  margin-right: 8px;
  width: 22px; height: 22px;
}

/* destructive menu action */
.menu-item.danger{
  background:#3a2a2a;
  border-color:#7f1d1d;
  color:#fecaca;
}
.menu-item.danger:hover{
  background:#422b2b;
  border-color:#ef4444;
  box-shadow:0 0 0 2px rgba(239,68,68,.18);
}
